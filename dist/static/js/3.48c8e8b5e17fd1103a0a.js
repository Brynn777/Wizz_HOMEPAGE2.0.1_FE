webpackJsonp([3],{"7hke":function(e,t){},XVbU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("P9l9"),n=r("YaEn"),o={data:function(){return{currentRoute:["storymanagement"],drawerTitle:"",drawerVisible:!1,buttonVisible:!0,storyYear:-1,productType:-1,memberType:-1,memberYear:-1,storyList:[],productList:[],memberList:[],storySelector:!1,productSelector:!1,memberSelector:!1,storySelectorList:[],memberSelectorList:[{value:0,label:"导师"},{value:1,label:"前端组",children:[]},{value:2,label:"产品组",children:[]},{value:3,label:"后端组",children:[]},{value:4,label:"运营组",children:[]}],productSelectorList:["校企合作项目","校园合作项目","校内自研项目"]}},beforeUpdate:function(){"storymanagement"==n.a.history.current.name?(this.drawerTitle="历史事件",this.currentRoute[0]="storymanagement",this.memberSelector=this.productSelector=!1,this.storySelector=this.buttonVisible=!0):"productionmanagement"==n.a.history.current.name?(this.drawerTitle="产品信息",this.currentRoute[0]="productionmanagement",this.memberSelector=this.storySelector=!1,this.productSelector=this.buttonVisible=!0):"membermanagement"==n.a.history.current.name?(this.drawerTitle="成员信息",this.currentRoute[0]="membermanagement",this.storySelector=this.productSelector=!1,this.memberSelector=this.buttonVisible=!0):"logmanagement"==n.a.history.current.name&&(this.drawerTitle="成员信息",this.currentRoute[0]="logmanagement",this.memberSelector=!0,this.storySelector=this.productSelector=this.buttonVisible=!1)},created:function(){this.currentRoute[0]=n.a.history.current.name;for(var e=2015;e<=(new Date).getFullYear();e++)this.memberSelectorList[1].children.push({value:e,label:e+"级"}),this.memberSelectorList[2].children.push({value:e,label:e+"级"}),this.memberSelectorList[3].children.push({value:e,label:e+"级"}),this.memberSelectorList[4].children.push({value:e,label:e+"级"})},methods:{changeDrawer:function(){this.drawerVisible=!this.drawerVisible,this.handleStory(),this.handleProduct(),this.handleMember()},handleStory:function(){var e=this;Object(i.l)().then(function(t){if(200==t.status){var r=e;r.storyList=[],t.data.forEach(function(e){var t=new Date(1e3*e.timeStamp).getFullYear();e.year=t,-1==r.storySelectorList.indexOf(t)&&r.storySelectorList.push(t),r.storySelectorList.sort(),r.storyList.push(e)})}})},handleProduct:function(){var e=this;Object(i.k)().then(function(t){if(200==t.status){var r=e;r.productList=[],t.data.forEach(function(e){r.productList.push(e)})}})},handleMember:function(){var e=this;Object(i.j)().then(function(t){if(200==t.status){var r=e;r.memberList=[],t.data.forEach(function(e){r.memberList.push(e)})}})},changeStoryYear:function(e){this.storyYear=e},changeProductType:function(e){"校企合作项目"==e?this.productType=0:"校园合作项目"==e?this.productType=1:"校内自研项目"==e&&(this.productType=2)},changeMemberType:function(e){this.memberType=e[0],e.length>1?this.memberYear=e[1]:this.memberYear=-1},showDetailWithid:function(e,t){this.$refs.detailPage.setChangePage(e,t)},topMenuLink:function(e){n.a.push({name:e.key})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-menu",{staticClass:"topMenu",attrs:{mode:"horizontal"},model:{value:e.currentRoute,callback:function(t){e.currentRoute=t},expression:"currentRoute"}},[r("a-menu-item",{key:"storymanagement",staticClass:"quaterItem",on:{click:function(t){return e.topMenuLink(t)}}},[e._v("事件")]),e._v(" "),r("a-menu-item",{key:"productionmanagement",staticClass:"quaterItem",on:{click:function(t){return e.topMenuLink(t)}}},[e._v("产品")]),e._v(" "),r("a-menu-item",{key:"membermanagement",staticClass:"quaterItem",on:{click:function(t){return e.topMenuLink(t)}}},[e._v("成员")]),e._v(" "),r("a-menu-item",{key:"logmanagement",staticClass:"quaterItem",on:{click:function(t){return e.topMenuLink(t)}}},[e._v("操作日志")])],1),e._v(" "),r("a-drawer",{attrs:{closable:!1,title:e.drawerTitle,visible:e.drawerVisible,placement:"right"},scopedSlots:e._u([e.buttonVisible?{key:"handle",fn:function(){return[r("div",{staticClass:"handle",on:{click:e.changeDrawer}},[r("a-icon",{attrs:{type:"setting"}})],1)]},proxy:!0}:null],null,!0)},[e._v(" "),e.storySelector?r("a-select",{key:"Selector1",staticClass:"selector",attrs:{placeholder:"请选择年份"},on:{change:e.changeStoryYear}},e._l(e.storySelectorList,function(t){return r("a-select-option",{key:t},[e._v(e._s(t)+"年")])}),1):e._e(),e._v(" "),e.productSelector?r("a-select",{key:"Selector2",staticClass:"selector",attrs:{placeholder:"请选择类别"},on:{change:e.changeProductType}},e._l(e.productSelectorList,function(t){return r("a-select-option",{key:t},[e._v(e._s(t))])}),1):e._e(),e._v(" "),e.memberSelector?r("a-cascader",{attrs:{options:e.memberSelectorList,changeOnSelect:""},on:{change:e.changeMemberType}}):e._e(),e._v(" "),e.storySelector?r("a-list",{key:"List1",attrs:{itemLayout:"horizontal"}},e._l(e.storyList,function(t){return r("div",{key:"story"+t.id},[e.storyYear==t.year||-1==e.storyYear?r("a-list-item",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.showDetailWithid(t.id)}}},[e._v("\n          "+e._s(t.name)+"\n        ")]):e._e()],1)}),0):e._e(),e._v(" "),e.productSelector?r("a-list",{key:"List2",attrs:{itemLayout:"horizontal"}},e._l(e.productList,function(t){return r("div",{key:"product"+t.id},[e.productType==t.ProjectType||-1==e.productType?r("a-list-item",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.showDetailWithid(t.id)}}},[e._v("\n          "+e._s(t.Name)+"\n        ")]):e._e()],1)}),0):e._e(),e._v(" "),e.memberSelector?r("a-list",{key:"List3",attrs:{itemLayout:"horizontal"}},e._l(e.memberList,function(t){return r("div",{key:"member"+t.id},[e.memberType!=t.MemberType&&-1!=e.memberType||e.memberYear!=t.SchoolYear&&-1!=e.memberYear?e._e():r("a-list-item",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.showDetailWithid(t.id,t.MemberType)}}},[e._v("\n          "+e._s(t.Name)+"\n        ")])],1)}),0):e._e()],1),e._v(" "),r("router-view",{ref:"detailPage"})],1)},staticRenderFns:[]};var s=r("VU/8")(o,a,!1,function(e){r("7hke")},"data-v-d69d4f2a",null);t.default=s.exports}});