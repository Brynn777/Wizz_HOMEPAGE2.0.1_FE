webpackJsonp([5],{beiA:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Gu7T"),i=t.n(r),s=(t("Mt9h"),t("YaEn")),l=t("P9l9"),o={data:function(){return this.form=this.$form.createForm(this),{callName:"成员",exchangeButtonVisible:!0,isTeacher:!1,changeId:0,memberInfo:{describe:"",name:"",type:"memberType0",teacher:"",year:"2018"},urlHost:"",uploadHost:"",tokenInfo:{key:"",token:""},listAvatar:[],previewImageUrl:"",visibleAvatar:!1,addButtonVisible:!1,deleteButtonVisible:!1,addVisible:!0,changeVisible:!1,formItemLayout:{labelCol:{span:6},wrapperCol:{span:12},buttonCol:{lg:{span:12,offset:6}}}}},mounted:function(){var e=this;this.memberInfo.year=(new Date).getFullYear()-2,Object(l.m)().then(function(a){e.productUrlBackground=[],200==a.status&&a.data.forEach(function(a){e.productUrlBackground.push(a)})}),Object(l.n)().then(function(a){200==a.status&&(e.urlHost="https://"+a.data.domain+"/","华东"==a.data.place?e.uploadHost="//upload.qiniup.com/":"华北"==a.data.place?e.uploadHost="//upload-z1.qiniup.com/":"华南"==a.data.place&&(e.uploadHost="//upload-z2.qiniup.com/"))})},methods:{add:function(e){var a=this;e.preventDefault(),this.form.validateFields(function(e,t){e||Object(l.a)(t.memberName,parseInt(t.schoolYear),t.memberDescribe,parseInt(t.memberType.split("").pop()),t.teacherInfo,a.isEmptyArray(a.isArrayOrObject(t.memberUrlAvatar))[0].url).then(function(e){a.showHandleTip2(e,t,"添加"),a.setAddStatus()},function(e){})})},change:function(e){var a=this;this.form.validateFields(function(t,r){t||Object(l.d)(r.memberName,parseInt(r.schoolYear),r.memberDescribe,parseInt(r.memberType.split("").pop()),r.teacherInfo,a.isEmptyArray(a.isArrayOrObject(r.memberUrlAvatar))[0].url,e).then(function(e){a.showHandleTip2(e,r,"修改")},function(e){})})},isArrayOrObject:function(e){return"[object Array]"===Object.prototype.toString.call(e)?e=e:"[object Object]"===Object.prototype.toString.call(e)&&(e=e.fileList),e},isEmptyArray:function(e){return 0==e.length&&e.push({url:""}),e},delete:function(e){var a=this;return Object(l.g)(e).then(function(e){a.showHandleTip(e)})},setChangePage:function(e,a){var t=this;this.changeId=e,0==a?(this.isTeacher=!0,this.callName="导师"):(this.isTeacher=!1,this.callName="成员"),Object(l.p)(e).then(function(e){t.form.setFieldsValue({memberName:e.data.Name,memberDescribe:e.data.Describe,memberType:"memberType"+e.data.MemberType,teacherInfo:e.data.TeacherInfo,schoolYear:e.data.SchoolYear}),t.listAvatar=[],e.data.UrlAvatar.length>0&&t.listAvatar.push({uid:e.data.UrlAvatar.split("/").pop(),name:e.data.UrlAvatar.split("/").pop(),url:e.data.UrlAvatar}),t.setChangeStatus()})},gotoDelete:function(){var e=this;e.$confirm({title:"删除",content:"您确认要删除该人员吗？",okText:"确认",cancelText:"取消",onOk:function(){e.delete(e.changeId)},onCancel:function(){}})},beforeUpload:function(e){var a=this,t="member-"+(new Date).getTime()+"."+e.name.split(".").pop();return Object(l.t)(t).then(function(e){a.tokenInfo.token=e.data,a.tokenInfo.key=t},function(e){})},setAddStatus:function(){this.form.resetFields(),this.listAvatar=[],this.exchangeButtonVisible=this.addVisible=!0,this.addButtonVisible=this.deleteButtonVisible=this.changeVisible=!1},exchangeCallName:function(){"成员"==this.callName?(this.callName="导师",this.isTeacher=!0):"导师"==this.callName&&(this.callName="成员",this.isTeacher=!1)},setChangeStatus:function(){this.addButtonVisible=this.changeVisible=this.deleteButtonVisible=!0,this.addVisible=this.exchangeButtonVisible=!1},showHandleTip:function(e){if(this.$message.config({top:"200px",duration:2}),200==e.status||404==e.status){this.$message.success("人员已成功删除"),this.setAddStatus()}else 401==e.status?(this.$message.error("您的身份已过期，请重新登录"),setTimeout(function(){s.a.push({name:"login"})},2e3)):504==e.status?this.$message.warning("请求超时，请稍后再试"):this.$message.warning("服务器故障，请联系管理员")},showHandleTip2:function(e,a,t){if(this.$message.config({top:"200px",duration:2}),200==e.status){var r=this;this.$message.success("人员“"+a.memberName+"”已成功"+t),"添加"==t&&setTimeout(function(){r.form.resetFields()},2e3)}else 401==e.status?(this.$message.error("您的身份已过期，请重新登录"),setTimeout(function(){s.a.push({name:"login"})},2e3)):504==e.status?this.$message.warning("请求超时，请稍后再试"):this.$message.warning("服务器故障，请联系管理员")},previewAvatar:function(e){this.previewImageUrl=e.url||e.thumbUrl,this.visibleAvatar=!0},cancelAvatar:function(){this.visibleAvatar=!1},baseUpload:function(e){var a=this,t=[].concat(i()(e.fileList));t=t.map(function(e){return e.response&&(e.url=e.thumbUrl=""+a.urlHost+e.response.key),e})},uploadAvatar:function(e){this.baseUpload(e),this.listAvatar=e.fileList}}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("a-form",{staticStyle:{position:"relative"},attrs:{form:e.form,layout:"horizontal"},on:{submit:e.add}},[e.addButtonVisible?t("a-button",{staticClass:"roundButtonLeft",attrs:{shape:"circle",icon:"file-add"},on:{click:e.setAddStatus}}):e._e(),e._v(" "),e.deleteButtonVisible?t("a-button",{staticClass:"roundButtonRight",attrs:{shape:"circle",icon:"delete"},on:{click:e.gotoDelete}}):e._e(),e._v(" "),e.exchangeButtonVisible?t("a-button",{staticClass:"roundButtonRight",attrs:{shape:"circle",icon:"swap"},on:{click:e.exchangeCallName}}):e._e(),e._v(" "),t("a-form-item",{attrs:{label:e.callName+"名称","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberName",{initialValue:e.memberInfo.name,rules:[{required:!0,message:e.callName+"名称是必填项"}]}],expression:"[\n          'memberName',\n          { initialValue: memberInfo.name,\n            rules: [{ required: true, message: `${callName}名称是必填项` }] }]"}],attrs:{placeholder:"请输入"+e.callName+"名称"}})],1),e._v(" "),t("a-form-item",{attrs:{label:e.callName+"简介","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberDescribe",{initialValue:e.memberInfo.describe,rules:[{required:!0,message:e.callName+"简介是必填项"}]}],expression:"[\n          'memberDescribe',\n          { initialValue: memberInfo.describe,\n            rules: [{ required: true, message: `${callName}简介是必填项` }] }]"}],attrs:{placeholder:"请输入"+e.callName+"简介"}})],1),e._v(" "),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isTeacher,expression:"!isTeacher"}],attrs:{label:e.callName+"类别","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberType",{initialValue:e.memberInfo.type,rules:[{required:!0,message:e.callName+"类别是必填项"}]}],expression:"[\n        'memberType',\n        { initialValue:memberInfo.type,\n        rules: [{ required: true, message: `${callName}类别是必填项` }] }]"}]},[t("a-radio",{attrs:{value:"memberType1"}},[e._v("前端组")]),e._v(" "),t("a-radio",{attrs:{value:"memberType2"}},[e._v("产品组")]),e._v(" "),t("a-radio",{attrs:{value:"memberType3"}},[e._v("后端组")]),e._v(" "),t("a-radio",{attrs:{value:"memberType4"}},[e._v("运营组")])],1)],1),e._v(" "),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:e.isTeacher,expression:"isTeacher"}],attrs:{label:e.callName+"信息","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["teacherInfo",{initialValue:e.memberInfo.teacher,rules:[{required:e.isTeacher,message:e.callName+"信息是必填项"}]}],expression:"[\n        'teacherInfo',\n        { initialValue:memberInfo.teacher,\n        rules: [{ required: isTeacher, message: `${callName}信息是必填项` }] }]"}],attrs:{placeholder:"请输入"+e.callName+"信息，用斜线“/”分割"}})],1),e._v(" "),t("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.isTeacher,expression:"!isTeacher"}],attrs:{label:"年级","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["schoolYear",{initialValue:e.memberInfo.year,rules:[{required:!0,message:" "}]}],expression:"[\n        'schoolYear',\n        { initialValue:memberInfo.year,\n        rules: [{ required: true, message: ' ' }] }]"}],attrs:{min:2015,max:2020}})],1),e._v(" "),t("a-form-item",{attrs:{label:e.callName+"头像","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[t("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["memberUrlAvatar",{initialValue:e.listAvatar,rules:[{required:!0,message:e.callName+"头像是必填项"}]}],expression:"[\n          'memberUrlAvatar',\n          { initialValue:listAvatar,\n          rules: [{ required: true,  message: `${callName}头像是必填项` }] }]"}],attrs:{action:e.uploadHost,listType:"picture-card",accept:"image/*",data:e.tokenInfo,beforeUpload:e.beforeUpload,fileList:e.listAvatar},on:{change:e.uploadAvatar,preview:e.previewAvatar}},[e.listAvatar.length<1?t("div",[t("a-icon",{attrs:{type:"plus"}}),e._v(" "),t("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),t("a-modal",{attrs:{visible:e.visibleAvatar,footer:null},on:{cancel:e.cancelAvatar}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageUrl}})])],1),e._v(" "),t("a-form-item",{attrs:{"wrapper-col":e.formItemLayout.buttonCol}},[e.addVisible?t("a-button",{staticClass:"bulkButton",attrs:{"html-type":"submit",type:"primary"}},[e._v("添加"+e._s(e.callName))]):e._e(),e._v(" "),e.changeVisible?t("a-button",{staticClass:"bulkButton",attrs:{type:"primary"},on:{click:function(a){return e.change(e.changeId)}}},[e._v("修改"+e._s(e.callName))]):e._e()],1)],1)],1)},staticRenderFns:[]};var m=t("VU/8")(o,n,!1,function(e){t("ymbt")},"data-v-2fd98773",null);a.default=m.exports},ymbt:function(e,a){}});